!function(A){function t(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return A[r].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var e={};t.m=A,t.c=e,t.d=function(A,e,r){t.o(A,e)||Object.defineProperty(A,e,{configurable:!1,enumerable:!0,get:r})},t.n=function(A){var e=A&&A.__esModule?function(){return A.default}:function(){return A};return t.d(e,"a",e),e},t.o=function(A,t){return Object.prototype.hasOwnProperty.call(A,t)},t.p="/dist",t(t.s=2)}([function(A,t){A.exports=riot},function(A,t,e){"use strict";function r(A){return"INPUT"===A.tagName&&["email","number","password","search","tel","text","url"].indexOf(A.type)>-1}function n(A){return"boolean"==typeof A?A:A.toString().toLowerCase()}function o(){var A=["page="+this.page,"display="+this.display];return null!==this.order&&A.push("order="+encodeURIComponent(this.order.rel+" "+(this.order.asc?"asc":"desc"))),this.filters.size>0&&this.filters.forEach(function(t,e){Array.isArray(t)?A.push("filters[]["+encodeURIComponent(e)+"][]="+t.map(encodeURIComponent).join("&filters[]["+encodeURIComponent(e)+"][]=")):A.push("filters[]["+encodeURIComponent(e)+"]"+(!0===t?"":"="+encodeURIComponent(t)))}),A.join("&")}function a(A,t){return A.$index=this.start+t+1,A}function i(A,t){var e=this.rel;if(e in A&&e in t){var r="number"==typeof A[e]?A[e]:A[e].toString().toLowerCase(),n="number"==typeof t[e]?t[e]:t[e].toString().toLowerCase();if(r<n)return this.asc?-1:1;if(r>n)return this.asc?1:-1}return 0}Object.defineProperty(t,"__esModule",{value:!0}),t.canInput=r,t.getBoolOrLowerCase=n,t.getUrlParams=o,t.setIndex=a,t.sort=i},function(A,t,e){"use strict";var r=e(3);r.keys().map(r)},function(A,t,e){function r(A){return e(n(A))}function n(A){var t=o[A];if(!(t+1))throw new Error("Cannot find module '"+A+"'.");return t}var o={"./rdata-display.tag":4,"./rdata-filter.tag":5,"./rdata-order.tag":6,"./rdata-paginator.tag":7,"./rdata.tag":8};r.keys=function(){return Object.keys(o)},r.resolve=n,A.exports=r,r.id=3},function(A,t,e){e(0).tag2("rdata-display",'<yield></yield> <option if="{auto}" each="{display in displays}" riot-value="{display}">{display}</option>',"",'onchange="{change}"',function(A){"use strict";var t=this;t.auto=!1,t.change=function(A){t.parent.trigger("display",parseInt(A.target.value,10)).update()},t.parent.on("display",function(A){t.isMounted?t.root.value=A:t.on("mount",function(){t.root.value=A})}),t.on("mount",function(){0===t.root.childElementCount&&t.update({displays:t.parent.opts.defaultDisplays||[10,25,50,100],auto:!0})}),t.on("update",function(){})})},function(A,t,e){e(0).tag2("rdata-filter","<yield></yield>","","",function(A){"use strict";function t(){if(u.length>0){var A=!s.opts.rel||":"===s.opts.rel;if(s.parent.isRemote())if(Array.isArray(u)){if(!A)if("SELECT"===s.root.tagName&&s.root.multiple)s.parent.filters.has(s.opts.rel)&&(s.parent.filters.get(s.opts.rel).length=0),s.parent.filters.set(s.opts.rel,u);else{var t=u[0];!1!==t&&s.parent.filters.set(s.opts.rel,t)}}else A?s.parent.filters.has(":")?s.parent.filters.get(":").push(u):s.parent.filters.set(":",[u]):s.parent.filters.set(s.opts.rel,u);else if("function"==typeof s.opts.onfilter)s.parent.filtered=s.parent.filtered.filter(s.opts.onfilter.bind(s.root));else{var e=void 0!==s.opts.caseSensitive&&!1!==s.opts.caseSensitive;Array.isArray(u)?A||(s.parent.filtered=s.parent.filtered.filter(function(A){if(s.opts.rel in A){if(null!==A[s.opts.rel]){var t="boolean"==typeof A[s.opts.rel]?A[s.opts.rel]:A[s.opts.rel].toString();return e?u.indexOf(t)>-1:u.map(function(A){return(0,i.getBoolOrLowerCase)(A)}).indexOf((0,i.getBoolOrLowerCase)(t))>-1}return!1}return!0})):s.parent.filtered=s.parent.filtered.filter(function(t){return A?void 0!==Object.values(t).find(function(A){return e?A.toString().includes(u):A.toString().toLowerCase().includes(u.toLowerCase())}):!(s.opts.rel in t)||null!==t[s.opts.rel]&&(e?t[s.opts.rel].toString().includes(u):t[s.opts.rel].toString().toLowerCase().includes(u.toLowerCase()))})}}}function r(){Array.isArray(u)?(u.length=0,s.isMounted||void 0===s.opts.initialValue?"SELECT"===s.root.tagName&&s.root.multiple?u=Array.prototype.filter.call(s.root.querySelectorAll("option"),function(A){return A.selected&&A.value.length>0}).map(function(A){return A.value}):"INPUT"===s.root.tagName&&"checkbox"===s.root.type?u.push(s.root.checked):s.root.value.length>0&&u.push(s.root.value.toString()):Array.isArray(s.opts.initialValue)?u=s.opts.initialValue:u.push(s.opts.initialValue)):u=s.root.value.trim()}function n(A){r(),a()}function o(A){A.target.value.trim()!==u&&(r(),c&&clearTimeout(c),c=setTimeout(function(){c=0,a()},l))}function a(){s.parent.isRemote()||(s.parent.filtered.length=0,s.parent.filtered=[].concat(s.parent.opts.data)),s.parent.trigger("filter").trigger("filtered"),s.parent.update()}var i=e(1),s=this,l=500,u=(0,i.canInput)(s.root)?"":[],c=0;r(),s.parent.on("filter",t),s.on("mount",function(){(0,i.canInput)(s.root)?s.root.addEventListener("input",o,!1):s.root.addEventListener("change",n,!1)}),s.on("before-unmount",function(){s.parent.off("filter",t)}),s.on("unmount",function(){u.length>0&&(Array.isArray(u)?u.length=0:u="",setTimeout(a))})})},function(A,t,e){e(0).tag2("rdata-order","<yield></yield>",'rdata-order,[data-is="rdata-order"]{ cursor: pointer; } rdata-order:after,[data-is="rdata-order"]:after{ font-family: \'icomoon\'; content: "\\e902"; margin-left: .5rem; } rdata-order[desc]:after,[data-is="rdata-order"][desc]:after{ content: "\\e900"; } rdata-order[asc]:after,[data-is="rdata-order"][asc]:after{ content: "\\e901"; }','onclick="{toggle}" asc="{asc}" desc="{desc}"',function(A){"use strict";function t(){var A=arguments.length>0&&void 0!==arguments[0]&&arguments[0];o=!0,A?n.parent.order&&n.parent.order.rel&&n.parent.order.rel===e()&&n.parent.trigger("order",null):n.parent.trigger("order",e(),n.asc,n.desc),o=!1}function e(){return"function"==typeof n.opts.onorder?n.opts.onorder:n.opts.rel}function r(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],o||n.update({asc:!1,desc:!1})}var n=this,o=!1;n.asc=void 0!==n.opts.asc&&!1!==n.opts.asc,n.desc=void 0!==n.opts.desc&&!1!==n.opts.desc&&!n.asc,(n.asc||n.desc)&&t(),n.toggle=function(A){n.asc?(n.asc=!1,n.desc=!0):(n.asc=!0,n.desc=!1),t(),n.parent.update(),A.preventDefault()},n.on("before-unmount",function(){n.parent.off("order",r),t(!0)}),n.parent.on("order",r)})},function(A,t,e){e(0).tag2("rdata-paginator",'<yield></yield> <span if="{auto}"> <span each="{page in pages}"> <span if="{!isNaN(page)}"> <span if="{parent.isCurrent(page)}">{page}</span> <a href="#" if="{!parent.isCurrent(page)}" onclick="{parent.go}">{page}</a> </span> <span if="{isNaN(page)}">...</span> </span> </span>',"","",function(A){"use strict";var t=this;t.pages=[1],t.current=1,t.auto=!1,t.canNext=function(){return t.current<t.count},t.canPrev=function(){return t.current>1},t.first=function(A){t.current>1&&t.go(1),A.preventDefault()},t.go=function(A){isNaN(A)&&(A.preventDefault(),"item"in A&&(A=A.item[Object.keys(A.item).shift()])),isNaN(A)||(t.parent.trigger("paginate",A),t.parent.update())},t.isCurrent=function(A){return t.current===A},t.last=function(A){t.current<t.count&&t.go(t.count),A.preventDefault()},t.next=function(A){t.canNext()&&t.go(t.current+1),A.preventDefault()},t.prev=function(A){t.canPrev()&&t.go(t.current-1),A.preventDefault()},t.parent.on("paginate",function(A){t.current=A}),t.on("mount",function(){0===t.root.childElementCount&&(t.auto=!0),t.update()}),t.on("update",function(){t.count=t.parent.rows>0?Math.ceil(t.parent.rows/t.parent.display):1,t.pages.length=0,t.count<8?t.pages=Array.apply(null,Array(t.count)).map(function(A,t){return t+1}):(t.pages.push(1),t.current<=4&&t.pages.push(2,3,4,5),t.current>4&&t.current<t.count-3&&t.pages.push("left",t.current-1,t.current,t.current+1),t.current>t.count-4&&t.pages.push("left",t.count-4,t.count-3,t.count-2,t.count-1),t.current<t.count-3&&t.pages.push("right"),t.pages.push(t.count))})})},function(A,t,e){e(0).tag2("rdata","<yield></yield>","@font-face { font-family: 'icomoon'; src: url('data:application/font-woff;base64,d09GRgABAAAAAAWAAAsAAAAABTQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABPUy8yAAABCAAAAGAAAABgDxIEY2NtYXAAAAFoAAAAVAAAAFQXVtKJZ2FzcAAAAbwAAAAIAAAACAAAABBnbHlmAAABxAAAAWwAAAFspwNI62hlYWQAAAMwAAAANgAAADYNG4+caGhlYQAAA2gAAAAkAAAAJAYLA8hobXR4AAADjAAAABwAAAAcDNsAAGxvY2EAAAOoAAAAEAAAABAAlgEQbWF4cAAAA7gAAAAgAAAAIAAKAC5uYW1lAAAD2AAAAYYAAAGGmUoJ+3Bvc3QAAAVgAAAAIAAAACAAAwAAAAMCNwGQAAUAAAKZAswAAACPApkCzAAAAesAMwEJAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAQAAA6QIDwP/AAEADwABAAAAAAQAAAAAAAAAAAAAAIAAAAAAAAwAAAAMAAAAcAAEAAwAAABwAAwABAAAAHAAEADgAAAAKAAgAAgACAAEAIOkC//3//wAAAAAAIOkA//3//wAB/+MXBAADAAEAAAAAAAAAAAAAAAEAAf//AA8AAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAgACSQNJABUAAAEUBiMhIiY1NDY3AT4BMzIWFwEeARUCSRUP/gAPFgYFAQAFDQgHDQUBAAUGAiUPFhYPBw0FAQAFBgYF/wAFDQcAAAABAAAAJQJJAW4AFQAAARQGBwEOASMiJicBLgE1NDYzITIWFQJJBgX/AAUNBwgNBf8ABQYWDwIADxUBSQcNBv8ABQUFBQEABg0HDxYWDwAAAAIAAAAlAkkDSQAVACsAAAEUBgcBDgEjIiYnAS4BNTQ2MyEyFhU1FAYjISImNTQ2NwE+ATMyFhcBHgEVAkkGBf8ABQ0HCA0F/wAFBhYPAgAPFRUP/gAPFgYFAQAFDQgHDQUBAAUGAUkHDQb/AAUFBQUBAAYNBw8WFg/cDxYWDwcNBQEABQYGBf8ABQ0HAAAAAAEAAAAAAAAvgJrHXw889QALBAAAAAAA1dqlqwAAAADV2qWrAAAAAAJJA0kAAAAIAAIAAAAAAAAAAQAAA8D/wAAABAAAAAAAAkkAAQAAAAAAAAAAAAAAAAAAAAcEAAAAAAAAAAAAAAACAAAAAkkAAAJJAAACSQAAAAAAAAAKABQAHgBGAG4AtgABAAAABwAsAAIAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAADgCuAAEAAAAAAAEABwAAAAEAAAAAAAIABwBgAAEAAAAAAAMABwA2AAEAAAAAAAQABwB1AAEAAAAAAAUACwAVAAEAAAAAAAYABwBLAAEAAAAAAAoAGgCKAAMAAQQJAAEADgAHAAMAAQQJAAIADgBnAAMAAQQJAAMADgA9AAMAAQQJAAQADgB8AAMAAQQJAAUAFgAgAAMAAQQJAAYADgBSAAMAAQQJAAoANACkaWNvbW9vbgBpAGMAbwBtAG8AbwBuVmVyc2lvbiAxLjAAVgBlAHIAcwBpAG8AbgAgADEALgAwaWNvbW9vbgBpAGMAbwBtAG8AbwBuaWNvbW9vbgBpAGMAbwBtAG8AbwBuUmVndWxhcgBSAGUAZwB1AGwAYQByaWNvbW9vbgBpAGMAbwBtAG8AbwBuRm9udCBnZW5lcmF0ZWQgYnkgSWNvTW9vbi4ARgBvAG4AdAAgAGcAZQBuAGUAcgBhAHQAZQBkACAAYgB5ACAASQBjAG8ATQBvAG8AbgAuAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==') format('woff'); font-weight: normal; font-style: normal; }","",function(A){"use strict";function t(){o.loading=!0,"string"==typeof o.opts.url?(i&&i.readyState<4&&i.abort(),i=new XMLHttpRequest,i.open("GET",o.opts.url+"?"+n.getUrlParams.bind(o).call(),!0),i.responseType="json",i.onload=function(){var A=i.response;i=null,A?o.start>A.total_count?(o.rows=A.total_count,r()):(a="url",delete o.extra,o.data.length=0,o.extra=A.extra||{},o.update({rows:A.total_count,data:A.items})):(a="url",delete o.extra,o.data.length=0,o.extra={},o.update({rows:0}))},i.send()):"function"==typeof o.opts.url&&o.opts.url.call(o,n.getUrlParams.bind(o).call()).then(function(A){o.start>A.total_count?(o.rows=A.total_count,r()):(a="url",delete o.extra,o.data.length=0,o.extra=A.extra||{},o.update({rows:A.total_count,data:A.items}))})}function r(){o.trigger("paginate",o.rows>0?Math.ceil(o.rows/o.display):1),o.update()}var n=e(1),o=this,a=null,i=null;o.page=1,o.data=[],o.start=0,o.display=o.opts.display||10,o.order=null,void 0!==o.opts.url?(o.filtered=[],o.loading=!0,o.filters=new Map,o.extra={}):(o.filtered=[].concat(o.opts.data),o.loading=!1),o.rows=o.filtered.length,o.getRows=function(A,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ";return o.rows.toString().concat(e,1===o.rows?A:t)},o.isRemote=function(){return void 0!==o.opts.url},o.on("display",function(A){a="display",o.display=A,o.start=o.display*(o.page-1)}),o.on("filter",function(){a="filter",o.isRemote()&&o.filters.clear()}),o.on("mount",function(){o.trigger("display",o.display),o.trigger("filter"),a=null,o.on("display",t),o.on("paginate",t),o.on("filtered",t),o.update()}),o.on("order",function(){var A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];a="order",o.order=null!==A?{rel:A,asc:t,desc:e}:null}),o.on("paginate",function(A){a="paginate",o.page=A,o.start=o.display*(o.page-1)}),o.on("update",function(){o.isRemote()?"url"===a?o.opts.indexed&&(o.data.forEach(n.setIndex.bind(o)),o.loading=!1):("order"===a&&null!==o.order||o.loading&&null===i)&&t():("order"!==a&&null!==a||null===o.order||(o.opts.data.sort("function"==typeof o.order.rel?o.order.rel.bind(o.order):n.sort.bind(o.order)),o.filtered.length=0,o.filtered=[].concat(o.opts.data),o.trigger("filter")),o.rows=o.filtered.length,o.data.length=0,o.start>o.rows&&o.page>1?r():o.opts.indexed?o.data=o.filtered.slice(o.start,o.start+o.display).map(n.setIndex.bind(o)):o.data=o.filtered.slice(o.start,o.start+o.display)),a=null})})}]);
//# sourceMappingURL=rdata.js.map